<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Document</title>
</head>

<body>
    <div id="testDiv">
        <span class="text">I am span</span>
        <ul>
            <li><span>1</span></li>
            <li><span>2</span></li>
            <li><span>3</span></li>
            <li><span>4</span></li>
            <li><span>5</span></li>
            <li><span>6</span></li>
            <li><span>7</span></li>
            <li><span>8</span></li>
            <li><span>9</span></li>
            <li><span>10</span></li>
            <li><span>11</span></li>
            <li><span>12</span></li>
            <li><span>13</span></li>
            <li><span>14</span></li>
            <li><span>15</span></li>
            <li><span>16</span></li>
            <li><span>17</span></li>
            <li><span>18</span></li>
            <li><span>19</span></li>
            <li><span>20</span></li>
            <li><span>21</span></li>
            <li><span>22</span></li>
            <li><span>23</span></li>
            <li><span>24</span></li>
            <li><span>25</span></li>
            <li><span>26</span></li>
            <li><span>27</span></li>
            <li><span>28</span></li>
            <li><span>29</span></li>
            <li><span>30</span></li>
            <li><span>31</span></li>
            <li><span>32</span></li>
            <li><span>33</span></li>
            <li><span>34</span></li>
            <li><span>35</span></li>
            <li><span>36</span></li>
            <li><span>37</span></li>
            <li><span>38</span></li>
            <li><span>39</span></li>
            <li><span>40</span></li>
            <li><span>41</span></li>
            <li><span>42</span></li>
            <li><span>43</span></li>
            <li><span>44</span></li>
            <li><span>45</span></li>
            <li><span>46</span></li>
            <li><span>47</span></li>
            <li><span>48</span></li>
            <li><span>49</span></li>
            <li><span>50</span></li>
            <li><span>51</span></li>
            <li><span>52</span></li>
            <li><span>53</span></li>
            <li><span>54</span></li>
            <li><span>55</span></li>
            <li><span>56</span></li>
            <li><span>57</span></li>
            <li><span>58</span></li>
            <li><span>59</span></li>
            <li><span>60</span></li>
            <li><span>61</span></li>
            <li><span>62</span></li>
            <li><span>63</span></li>
            <li><span>64</span></li>
            <li><span>65</span></li>
            <li><span>66</span></li>
            <li><span>67</span></li>
            <li><span>68</span></li>
            <li><span>69</span></li>
            <li><span>70</span></li>
            <li><span>71</span></li>
            <li><span>72</span></li>
            <li><span>73</span></li>
            <li><span>74</span></li>
            <li><span>75</span></li>
            <li><span>76</span></li>
            <li><span>77</span></li>
            <li><span>78</span></li>
            <li><span>79</span></li>
            <li><span>80</span></li>
            <li><span>81</span></li>
            <li><span>82</span></li>
            <li><span>83</span></li>
            <li><span>84</span></li>
            <li><span>85</span></li>
            <li><span>86</span></li>
            <li><span>87</span></li>
            <li><span>88</span></li>
            <li><span>89</span></li>
            <li><span>90</span></li>
            <li><span>91</span></li>
            <li><span>92</span></li>
            <li><span>93</span></li>
            <li><span>94</span></li>
            <li><span>95</span></li>
            <li><span>96</span></li>
            <li><span>97</span></li>
            <li><span>98</span></li>
            <li><span>99</span></li>
            <li><span>100</span></li>
        </ul>
    </div>
    <script type="text/javascript">
        function on(eventName, delegator_selector, selector, fn) {
            let eleDelegator = document.querySelector(delegator_selector)
            eleDelegator.addEventListener(eventName, (e) => {
                let ele = e.target
                while (!ele.matches(selector)) {
                    ele = ele.parentElement
                    if (ele === eleDelegator) {
                        break;
                    }
                }
                if (ele.matches(selector)) {
                    // 设置回调函数的 this 指向委托的对象 li
                    fn.call(ele, e)
                }

            })
        }
        on('click', '#testDiv', 'li', function (e) {
            console.log(this);
        })
    </script>
</body>

</html>